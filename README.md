# Отказоустойчивый сервис канала связи

## Задача

Разработать сервис для обеспечения непрерывной связи, который автоматически переключается между доступными каналами при сбоях. Сервис должен принимать список каналов связи, каждый из которых имеет одно из трёх состояний:

- idle — канал проверен и доступен для использования.
- connected — канал активен и используется в данный момент.
- unavailable — канал недоступен (проверка выявила ошибку или недоступность).

Под каналом связи подразумевается любой источник данных - например, различные API-эндпоинты, веб-сокеты или другие сервисы. При этом все каналы должны возвращать данные в одинаковом формате (иметь идентичную структуру ответа).

## Описание механизма работы

1. Автоматически мониторить состояние текущего активного канала связи
2. При сбое текущего канала немедленно переключаться на любой доступный канал в состоянии idle
3. Если доступных каналов нет, показывать пользователю уведомление об ошибке
4. Периодически проверять ранее недоступные каналы и обновлять их статус

Реализация должна гарантировать бесперебойную работу приложения при отказе отдельных каналов связи.

## Особенности

Перечёркнутые пункты не были реализованы в виду отсутствия времени или не до конца понятного описания:

- Реализовать механизм автоматического переключения между каналами связи без прерывания пользовательского опыта
- Разработать алгоритм проверки доступности канала связи с учетом возможных сетевых задержек и ошибок
- Создать очередь приоритетов для выбора следующего канала связи при отказе текущего
- Предусмотреть сценарии восстановления канала после сбоя и возможность возврата к нему
- Учесть возможные состояния гонки (race conditions) при асинхронной работе с каналами
- Реализовать типобезопасную систему событий для оповещения о смене состояний
- ~~Реализовать систему логирования и отслеживания состояния каналов связи~~
- ~~Предусмотреть механизм буферизации данных при переключении между каналами~~
- ~~Добавить возможность отложенного переключения канала с учетом критичности передаваемых данных~~
